<style type="text/css">
</style>
<div>
  <span>Country: </span>
  <select id="choice"></select>
  <span>Sort by: </span>
  <select id="sort">
    <option value="alpha">Contributors names</option>
    <option value="participation">Participation to ARs</option>
    <option selected="selected" value="chrono">First participation</option>
  </select>
</div>
<div id="container"></div>
<script src="lib/d3.min.js"></script>
<script src="people-lines.js"></script>
<script type="text/javascript">
  var viz = new IPCCPeopleLines();
  viz.load_countries('data/countries.json', function() {

    // populate dropdown list of countries
    var select = document.querySelector('#choice'),
        sort = document.querySelector('#sort'),
        opts = '';

    viz.listCountries.forEach(function(c) {
      opts += '<option ' + (c === viz.defaultCountry ? 'selected="selected" ' : '') + 'value="' + c + '">' + c + '</option>\n';
    });

    select.innerHTML = opts;

    select.onchange = sort.onchange = function(e) {
      viz.load_country(select.value, function() {
        viz.draw_country('#container', select.value, sort.value);
      });
    };
    select.onchange();

  });
</script>
